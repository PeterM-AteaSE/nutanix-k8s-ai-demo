<!DOCTYPE html>
<html>
<head>
    <title>GPU Utilization Heatmap</title>
    <meta charset="utf-8">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .subtitle {
            color: rgba(255,255,255,0.9);
            text-align: center;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        .chart-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        .insight {
            background: rgba(255,255,255,0.95);
            border-radius: 12px;
            padding: 25px;
            margin-top: 20px;
            border-left: 5px solid #2ecc71;
        }
        .insight h3 {
            margin-top: 0;
            color: #27ae60;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽ¯ GPU Utilization Analysis</h1>
        <p class="subtitle">NVIDIA A30 with MIG Partitioning - Resource Efficiency Comparison</p>
        
        <div class="chart-container">
            <canvas id="utilizationChart"></canvas>
        </div>
        
        <div class="chart-container">
            <canvas id="wasteChart"></canvas>
        </div>
        
        <div class="insight">
            <h3>ðŸ’¡ Key Business Impact</h3>
            <ul>
                <li><strong>60% efficiency improvement</strong> with MIG partitioning</li>
                <li><strong>4x more workloads</strong> can run simultaneously on the same hardware</li>
                <li><strong>Reduced GPU idle time</strong> from 75% to 15%</li>
                <li><strong>Better ROI</strong> on GPU infrastructure investment</li>
                <li><strong>Isolation guarantee</strong> - workloads don't interfere with each other</li>
            </ul>
        </div>
    </div>
    
    <script>
        const scenarios = ["Single-Tenant (No MIG)", "MIG: 1g.6gb (Dev)", "MIG: 2g.12gb (Staging)", "MIG: Full GPU (Prod)"];
        const utilization = [25, 85, 80, 90];
        const waste = [75, 15, 20, 10];
        const pods = [1, 4, 2, 1];
        
        // Utilization Chart
        const utilizationCtx = document.getElementById('utilizationChart').getContext('2d');
        new Chart(utilizationCtx, {
            type: 'bar',
            data: {
                labels: scenarios,
                datasets: [{
                    label: 'GPU Utilization (%)',
                    data: utilization,
                    backgroundColor: utilization.map(val => {
                        if (val >= 80) return '#2ecc71';
                        if (val >= 60) return '#f39c12';
                        return '#e74c3c';
                    }),
                    borderWidth: 2,
                    borderColor: '#2c3e50'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'GPU Utilization by Configuration',
                        font: { size: 18 }
                    },
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            afterLabel: function(context) {
                                return 'Pods per GPU: ' + pods[context.dataIndex];
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Utilization %'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });
        
        // Waste Comparison Chart
        const wasteCtx = document.getElementById('wasteChart').getContext('2d');
        new Chart(wasteCtx, {
            type: 'bar',
            data: {
                labels: scenarios,
                datasets: [{
                    label: 'Wasted Capacity (%)',
                    data: waste,
                    backgroundColor: waste.map(val => {
                        if (val <= 20) return '#2ecc71';
                        if (val <= 40) return '#f39c12';
                        return '#e74c3c';
                    }),
                    borderWidth: 2,
                    borderColor: '#2c3e50'
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    title: {
                        display: true,
                        text: 'Wasted GPU Capacity Comparison',
                        font: { size: 18 }
                    },
                    legend: {
                        display: false
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: 'Wasted %'
                        },
                        ticks: {
                            callback: function(value) {
                                return value + '%';
                            }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>